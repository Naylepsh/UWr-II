class Person
  def initialize(nick, phone_number, groups)
    @nick = nick
    @phone_number = phone_number
    @groups = groups
  end

  def belongs_to(group)
    @groups.each do | persons_group |
      if group == persons_group
        return true
      end
    end
    false
  end

  def to_s
    puts(@nick, @phone_number, @groups)
  end
end

def search_by_nick(nick)
  # make filename be dependant on static global var
  File.open('people', 'r').each do |line|
    info = line.split
    if info[0] == nick
      return Person.new(info[0], info[1], info[2, info.length])
    end
  end
end

def find_all_groups()
  groups = []
  File.open($people_filename, 'r').each do |line|
    info = line.split
    info[2, info.length].each do | group |
      groups.push(group) unless groups.include? group
    end
  end
  groups
end

def find_all_people_of_group(group)
  people = []
  File.open($people_filename, 'r').each do |line|
    info = line.split
    person = Person.new(info[0], info[1], info[2, info.length])
    if person.belongs_to(group)
      people.push(person)
    end
  end
  people
end

$people_filename = 'people'
#puts search_by_nick('john')
puts find_all_groups